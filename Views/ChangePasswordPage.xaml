<?xml version="1.0" encoding="utf-8" ?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:fontAwesome="clr-namespace:FontAwesome.Sharp;assembly=FontAwesome.Sharp.Maui"
             x:Class="trovagiocatoriApp.Views.ChangePasswordPage"
             Title="Cambia Password"
             BackgroundColor="#F0F2F5">

  <VerticalStackLayout Padding="24" Spacing="24">

    <Label Text="Inserisci la tua password corrente e la nuova"
           FontSize="18"
           HorizontalOptions="Center"
           TextColor="#333333"/>

    <!-- Form Password con toggle occhio -->
    <Frame CornerRadius="16"
           Padding="20"
           BackgroundColor="White"
           HasShadow="True">
      <VerticalStackLayout Spacing="16">
        <!-- Password Corrente -->
        <Grid>
          <Entry x:Name="CurrentPasswordEntry"
                 Placeholder="Password attuale"
                 IsPassword="True"
                 BackgroundColor="#F5F5F5"
                 HeightRequest="48"
                 Margin="0"/>
          <ImageButton Source="eye_close.png"
                       x:Name="ToggleCurrentPasswordVisibility"
                       WidthRequest="24"
                       HeightRequest="24"
                       BackgroundColor="Transparent"
                       HorizontalOptions="End"
                       VerticalOptions="Center"
                       Margin="0,0,12,0"
                       Clicked="OnToggleCurrentPassword"/>
        </Grid>

        <!-- Nuova Password -->
        <Grid>
          <Entry x:Name="NewPasswordEntry"
                 Placeholder="Nuova password"
                 IsPassword="True"
                 BackgroundColor="#F5F5F5"
                 HeightRequest="48"
                 Margin="0"/>
          <ImageButton Source="eye_close.png"
                       x:Name="ToggleNewPasswordVisibility"
                       WidthRequest="24"
                       HeightRequest="24"
                       BackgroundColor="Transparent"
                       HorizontalOptions="End"
                       VerticalOptions="Center"
                       Margin="0,0,12,0"
                       Clicked="OnToggleNewPassword"/>
        </Grid>

        <!-- Conferma Password -->
        <Grid>
          <Entry x:Name="ConfirmPasswordEntry"
                 Placeholder="Conferma nuova password"
                 IsPassword="True"
                 BackgroundColor="#F5F5F5"
                 HeightRequest="48"
                 Margin="0"/>
          <ImageButton Source="eye_close.png"
                       x:Name="ToggleConfirmPasswordVisibility"
                       WidthRequest="24"
                       HeightRequest="24"
                       BackgroundColor="Transparent"
                       HorizontalOptions="End"
                       VerticalOptions="Center"
                       Margin="0,0,12,0"
                       Clicked="OnToggleConfirmPassword"/>
        </Grid>

        <Button Text="Aggiorna"
                FontAttributes="Bold"
                CornerRadius="8"
                HeightRequest="48"
                Background="#1877F2"
                TextColor="White"
                Clicked="OnChangePasswordClicked"/>

        <Button Text="Annulla"
                FontAttributes="Bold"
                CornerRadius="8"
                HeightRequest="48"
                Background="#E0E0E0"
                TextColor="#333"
                Clicked="OnCancelChangePassword"/>
      </VerticalStackLayout>
    </Frame>

  </VerticalStackLayout>
</ContentPage>