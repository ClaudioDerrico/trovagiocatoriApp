<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="trovagiocatoriApp.Views.LoginPage"
             Title="Login"
             BackgroundColor="#FFFFFF">
    <ScrollView>
        <Grid RowSpacing="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header con logo -->
            <Frame Grid.Row="0" BackgroundColor="#333" Padding="12" HasShadow="True" CornerRadius="0">
                <Image Source="trovagiocatori.png" HeightRequest="90" WidthRequest="320" Aspect="AspectFit" HorizontalOptions="Start" />
            </Frame>

            <!-- Contenuto principale -->
            <VerticalStackLayout Grid.Row="1" Spacing="24" Padding="24,32" HorizontalOptions="FillAndExpand" VerticalOptions="Center" MaximumWidthRequest="460">

                <!-- Intestazione -->
                <VerticalStackLayout >
                    <Label Text="Bentornato! Inserisci i tuoi dati." FontSize="16" TextColor="#666" HorizontalOptions="Start" />
                    <Label x:Name="ErrorMessage" Text="" FontSize="14" TextColor="#E53935" IsVisible="False" HorizontalOptions="Start" />
                </VerticalStackLayout>

                <!-- Form -->
                <Frame BorderColor="#E0E0E0" BackgroundColor="#F5F5F5" CornerRadius="12" Padding="20" HasShadow="False">
                    <VerticalStackLayout Spacing="20">
                        <!-- Campo Email -->
                        <VerticalStackLayout Spacing="6">
                            <Label Text="E-mail o Username" FontAttributes="Bold" TextColor="#333" />
                            <Frame Padding="2" HasShadow="False" BorderColor="#DDDDDD" CornerRadius="8" BackgroundColor="White">
                                <Grid ColumnDefinitions="Auto,*">
                                    <Image Grid.Column="0" Source="email_icon.png" HeightRequest="20" WidthRequest="20" Margin="10,0" VerticalOptions="Center" IsVisible="true" />
                                    <Entry Grid.Column="1" x:Name="EmailEntry" Placeholder="Inserisci la tua email o username" 
                                           Keyboard="Email" BackgroundColor="Transparent" />
                                </Grid>
                            </Frame>
                            <Label x:Name="EmailError" Text="E-mail non valida" TextColor="#E53935" FontSize="12" IsVisible="False" Margin="5,0,0,0" />
                        </VerticalStackLayout>

                        <!-- Campo Password -->
                        <VerticalStackLayout Spacing="6">
                            <Label Text="Password" FontAttributes="Bold" TextColor="#333" />
                            <Frame Padding="2" HasShadow="False" BorderColor="#DDDDDD" CornerRadius="8" BackgroundColor="White">
                                <Grid ColumnDefinitions="Auto,*,Auto">
                                    <Image Grid.Column="0" Source="password_icon.png" HeightRequest="20" WidthRequest="20" Margin="10,0" VerticalOptions="Center" IsVisible="true" />
                                    <Entry Grid.Column="1" x:Name="PasswordEntry" Placeholder="Inserisci la tua password" 
                                           IsPassword="True" BackgroundColor="Transparent" />
                                    <ImageButton Grid.Column="2" Source="eye_open.png" WidthRequest="24" HeightRequest="24"
                                               Margin="10,0" VerticalOptions="Center" BackgroundColor="Transparent"
                                               Clicked="OnTogglePasswordVisibility" />
                                </Grid>
                            </Frame>
                            <Label x:Name="PasswordError" Text="Inserisci una password di almeno 8 caratteri" 
                                   TextColor="#E53935" FontSize="12" IsVisible="False" Margin="5,0,0,0" />
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Frame>

                <!-- Pulsante di Login -->
                <Button Text="ACCEDI" 
                      BackgroundColor="#1E88E5" 
                      TextColor="White" 
                      CornerRadius="8" 
                      FontAttributes="Bold" 
                      HeightRequest="50" 
                      Clicked="OnLoginClicked"
                      Margin="0,10,0,16" />

                <!-- Separatore "or" -->
                <Grid ColumnDefinitions="*,Auto,*" VerticalOptions="Center" Margin="0,0,0,16">
                    <BoxView Grid.Column="0" HeightRequest="1" BackgroundColor="#E0E0E0" VerticalOptions="Center" />
                    <Label Grid.Column="1" Text="oppure" FontSize="14" TextColor="#757575" Margin="16,0" VerticalOptions="Center" />
                    <BoxView Grid.Column="2" HeightRequest="1" BackgroundColor="#E0E0E0" VerticalOptions="Center" />
                </Grid>

                <!-- Opzione per Registrazione -->
                <VerticalStackLayout Spacing="10" HorizontalOptions="Center">
                    <Label Text="Non hai ancora un account?" 
                           FontSize="15" 
                           TextColor="#757575"
                           HorizontalOptions="Center" />
                    <Button Text="REGISTRATI ORA" 
                            FontSize="15" 
                            TextColor="#1E88E5" 
                            BackgroundColor="Transparent" 
                            BorderColor="#1E88E5" 
                            BorderWidth="1" 
                            CornerRadius="8" 
                            HeightRequest="45" 
                            Clicked="OnRegisterNowClicked" 
                            HorizontalOptions="Center"
                            WidthRequest="200" />
                </VerticalStackLayout>
            </VerticalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>